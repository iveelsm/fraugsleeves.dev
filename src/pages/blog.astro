---
import { getCollection } from 'astro:content';
import NavigableLayout from '../layouts/navigable.astro';
import '../styles/blog-list.css';

const blogs = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

function formatDate(date: Date): string {
	return date.toLocaleDateString('en-US', {
		year: 'numeric',
		month: 'long',
		day: 'numeric'
	});
}
---
<NavigableLayout title="Blog">
	<div class="blog-container">
		<ul class="posts-list">
			{blogs.map(post => (
				<li class="post-item">
					<a href={`/blog/${post.id}`} class="post-link">
						<span class="post-title">{post.data.title}</span>
						<span class="post-date">{formatDate(post.data.pubDate)}</span>
					</a>
					{post.data.description && (
						<p class="post-description">{post.data.description}</p>
					)}
				</li>
			))}
		</ul>
	</div>
</NavigableLayout>
