---
import "../styles/blog.css";

import NavigableLayout from "./navigable.astro";
import TableOfContents from "../components/toc.astro";
const { frontmatter, headings } = Astro.props;
const { minutesRead } = frontmatter;
---

<NavigableLayout title={frontmatter.title} class="blog-layout">
	<!-- Fixed Header with Post Info -->
	<header class="post-header-fixed">
		<div class="post-header-box">
			<div class="post-header-content">
				<div class="post-header-main">
					<h1 class="post-title" data-pagefind-meta="title">
						{frontmatter.title}
					</h1>
					<div class="post-meta">
						<span class="post-date"
							>{
								new Date(frontmatter.pubDate).toDateString()
							}</span
						>
						<span class="meta-separator">·</span>
						<span class="post-author">{frontmatter.author}</span>
						<span class="meta-separator">·</span>
						<span class="reading-time">{minutesRead}</span>
					</div>
				</div>
				<div class="post-header-collapsible">
					<p class="post-summary">{frontmatter.description}</p>
					<ul class="post-tags">
						{
							frontmatter.tags.map((tag) => (
								<li class="tag">#{tag}</li>
							))
						}
					</ul>
				</div>
			</div>
		</div>
	</header>

	<!-- Main Content Area with TOC Sidebar -->
	<div class="blog-container">
		<aside class="toc-sidebar">
			<div class="toc-wrapper">
				<h2 class="toc-title">Table of Contents</h2>
				<TableOfContents headings={headings} />
			</div>
		</aside>
		<main class="post-content">
			<slot />
		</main>
	</div>

	<script>
		import "../scripts/blog-post.js";
	</script>
</NavigableLayout>
