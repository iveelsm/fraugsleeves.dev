/* ===========================================
   Post Layout Styles (Individual Blog Post)
   =========================================== */
@import "./base.css";

.post-header-fixed {
	background: transparent;
	padding: var(--space-md) var(--space-lg);
}

.post-header-box {
	max-width: var(--max-width-container);
	margin: 0 auto;
	background: var(--color-bg-alt);
	border: 1px solid var(--color-border-dark);
	border-radius: var(--radius-lg);
	padding: 1.25rem var(--space-lg);
	box-shadow:
		0 4px 12px oklch(0% 0 0 / 0.12),
		0 2px 4px oklch(0% 0 0 / 0.08);
}

.post-header-content {
	max-width: 100%;
}

.post-header-main {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	gap: var(--space-sm) var(--space-lg);
}

.post-header-main .post-title {
	font-family: var(--font-serif);
	font-size: var(--text-3xl);
	font-weight: var(--font-bold);
	color: var(--color-text-heading);
	line-height: var(--leading-tight);
	margin: 0;
}

.post-meta {
	font-size: var(--text-code);
	color: var(--color-text-subtle);
	display: flex;
	align-items: right;
	gap: var(--space-sm);
	flex-shrink: 0;
}

.meta-separator {
	color: var(--color-border);
}

/* Header details */
.post-header-collapsible {
	margin-top: 0.75rem;
}

.post-summary {
	font-size: 0.95rem;
	color: var(--color-text-muted);
	margin-bottom: 0.75rem;
	font-style: italic;
	line-height: var(--leading-normal);
}

.post-author-line,
.post-editors-line {
	font-size: var(--text-code);
	color: var(--color-text-muted);
	margin: 0 0 0.5rem 0;
	line-height: var(--leading-normal);
}

.post-author-line strong,
.post-editors-line strong {
	font-family: var(--font-mono-variable);
	color: var(--color-text-subtle);
}

.post-tags {
	list-style: none;
	display: flex;
	flex-wrap: wrap;
	gap: var(--space-sm);
	padding: 0;
	margin: 0;
}

.tag {
	background-color: var(--color-tag-bg);
	color: var(--color-tag-text);
	font-size: var(--text-xs);
	padding: 0.15rem var(--space-sm);
	border-radius: var(--radius-full);
	font-family: var(--font-mono);
	white-space: nowrap;
}

.blog-container {
	display: flex;
	align-items: flex-start;
	max-width: var(--max-width-wide);
	margin: 0 auto;
	padding: var(--space-xl);
	gap: var(--space-2xl);
}

.toc-sidebar {
	order: -1;
	flex: 0 0 var(--toc-width);
	position: sticky;
	top: 100px;
	align-self: flex-start;
	max-height: calc(100vh - 120px);
	overflow-y: auto;
}

.toc-wrapper {
	background: var(--uchu-gray-1);
	border: 1px solid var(--color-border-dark);
	border-radius: var(--radius-lg);
	padding: var(--space-md);
	box-shadow:
		0 4px 12px oklch(0% 0 0 / 0.12),
		0 2px 4px oklch(0% 0 0 / 0.08);
}

.toc-title {
	font-family: var(--font-serif);
	font-size: var(--text-sm);
	font-weight: var(--font-semibold);
	color: var(--color-tag-text);
	margin-bottom: 0.75rem;
	padding-bottom: var(--space-sm);
	border-bottom: 1px solid var(--color-border);
}

.article-toc ul {
	font-weight: var(--font-semibold);
	list-style: none;
	padding: 0;
	margin: 0;
}

.article-toc li {
	margin: var(--space-xs) 0;
}

.article-toc > ul > li > ul {
	margin-left: var(--space-md);
}

.article-toc > ul > li > ul > li > ul {
	margin-left: var(--space-md);
}

.article-toc a {
	display: block;
	text-decoration: none;
	color: var(--color-text);
	font-family: var(--font-serif);
	font-size: var(--text-code);
	padding: 0.35rem var(--space-sm);
	border-radius: var(--radius-sm);
	transition: all var(--transition-fast);
	border-left: 2px solid transparent;
}

.article-toc a:hover {
	color: var(--color-text);
	background-color: var(--color-bg-alt);
}

.article-toc a.active {
	font-weight: var(--font-bold);
	color: var(--color-accent);
	background-color: var(--color-accent-bg);
	border-left: 2px solid var(--color-accent);
}

.post-content {
	flex: 1;
	min-width: 0;
	max-width: var(--max-width-content);
	padding: 0 var(--space-xl) var(--space-xl) var(--space-xl);
	font-family: var(--font-mono);
}

.post-content h1,
.post-content h2,
.post-content h3,
.post-content h4 {
	font-family: var(--font-serif);
	font-weight: var(--font-bold);
	margin-top: var(--space-xl);
	margin-bottom: var(--space-md);
	color: var(--color-text-heading);
	scroll-margin-top: 120px;
	position: relative;
}

.post-content strong {
	font-family: var(--font-mono-variable);
}

.post-content .heading-anchor {
	position: absolute;
	left: -1.75em;
	top: 50%;
	transform: translateY(-50%);
	display: flex;
	align-items: center;
	text-decoration: none;
	opacity: 0;
	transition: opacity var(--transition-fast);
}

.post-content .heading-anchor .anchor-icon {
	color: var(--color-text-muted);
	display: flex;
	align-items: center;
}

.post-content .heading-anchor svg {
	width: 0.8em;
	height: 0.8em;
}

.post-content h1:hover .heading-anchor,
.post-content h2:hover .heading-anchor,
.post-content h3:hover .heading-anchor,
.post-content h4:hover .heading-anchor,
.post-content .heading-anchor:focus {
	opacity: 1;
}

.post-content .heading-anchor:hover .anchor-icon {
	color: var(--color-accent);
}

.post-content .heading-anchor.copied::after {
	content: "Copied!";
	position: absolute;
	left: 100%;
	top: 50%;
	transform: translateY(-50%);
	background: var(--color-text-heading);
	color: var(--color-bg);
	font-size: var(--text-xs);
	padding: 0.25em 0.5em;
	border-radius: var(--radius-sm);
	white-space: nowrap;
	margin-left: 0.5em;
	animation: fadeInOut 1.5s ease forwards;
}

@keyframes fadeInOut {
	0% {
		opacity: 0;
	}
	15% {
		opacity: 1;
	}
	85% {
		opacity: 1;
	}
	100% {
		opacity: 0;
	}
}

.post-content h1 {
	font-size: var(--text-3xl);
}

.post-content h2 {
	font-size: var(--text-2xl);
	border-bottom: 1px solid var(--color-border);
	padding-bottom: var(--space-xs);
}

.post-content h3 {
	font-size: var(--text-xl);
}

.post-content h4 {
	font-size: var(--text-lg);
}

.post-content p {
	margin: var(--space-md) 0;
	color: var(--color-text);
}

.post-content a {
	color: var(--color-accent);
	text-decoration: none;
}

.post-content a:hover {
	text-decoration: none;
}

.post-content code {
	background: var(--color-code-bg);
	padding: 0.2em 0.4em;
	border-radius: var(--radius-sm);
	font-family: var(--font-mono);
	font-size: var(--text-code);
}

.post-content pre {
	background: var(--color-code-bg);
	padding: var(--space-md);
	overflow-x: auto;
	border-radius: var(--radius-md);
	font-family: var(--font-mono);
	font-size: var(--text-code);
	margin: var(--space-lg) 0;
}

.post-content pre code {
	background: none;
	padding: 0;
}

.post-content ul,
.post-content ol {
	padding-left: var(--space-lg);
	margin: var(--space-md) 0;
}

.post-content li {
	margin-bottom: var(--space-sm);
}

.post-content blockquote {
	font-family: var(--font-mono);
	font-style: italic;
	border-left: 3px solid var(--color-accent);
	margin: var(--space-lg) 0;
	padding: var(--space-sm) var(--space-md);
	background: var(--color-bg-alt);
	color: var(--color-text-muted);
	border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

.post-content img {
	max-width: 100%;
	height: auto;
	border-radius: var(--radius-md);
	margin: var(--space-md) 0;
}

.post-content table {
	width: 100%;
	border-collapse: collapse;
	margin: var(--space-lg) 0;
}

.post-content th,
.post-content td {
	border: 1px solid var(--color-border);
	padding: 0.75rem;
	text-align: left;
}

.post-content th {
	background: var(--color-code-bg);
	font-weight: var(--font-bold);
}

/* Responsive Design */
@media (max-width: 1024px) {
	.blog-container {
		flex-direction: column;
		padding: var(--space-lg);
	}

	.toc-sidebar {
		position: relative;
		top: 0;
		flex: none;
		width: 100%;
		max-height: none;
		margin-bottom: var(--space-lg);
	}

	.toc-wrapper {
		max-height: 300px;
		overflow-y: auto;
	}

	.post-content {
		max-width: 100%;
	}
}

@media (max-width: 640px) {
	.post-header-fixed {
		padding: var(--space-md);
	}

	.post-header-main {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--space-xs);
	}

	.post-meta {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--space-xs);
	}

	.meta-separator {
		display: none;
	}

	.post-title {
		font-size: 1.35rem;
	}

	.post-summary {
		font-size: var(--text-sm);
	}

	.blog-container {
		padding: var(--space-md);
	}

	.toc-sidebar {
		display: none;
	}

	.post-content {
		padding: 1.25rem;
	}

	.post-content h1 {
		font-size: var(--text-2xl);
	}

	.post-content h2 {
		font-size: var(--text-xl);
	}

	.post-content h3 {
		font-size: var(--text-lg);
	}

	.post-content .heading-anchor {
		position: absolute;
		left: auto;
		right: 0;
		opacity: 0.5;
	}

	.post-content .heading-anchor.copied::after {
		left: auto;
		right: 100%;
		margin-left: 0;
		margin-right: 0.5em;
	}
}
