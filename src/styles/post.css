/* ===========================================
   Post Layout Styles (Individual Blog Post)
   =========================================== */
@import "./base.css";

.post-header-fixed {
	background: transparent;
	padding: var(--space-md) var(--space-lg);
}

.post-header-box {
	margin: 0 auto;
	box-shadow:
		0 4px 12px oklch(0% 0 0 / 0.12),
		0 2px 4px oklch(0% 0 0 / 0.08);
	border: 1px solid var(--color-border-dark);
	border-radius: var(--radius-lg);
	background: var(--color-bg-alt);
	padding: 1.25rem var(--space-lg);
	max-width: var(--max-width-container);
}

.post-header-content {
	max-width: 100%;
}

.post-header-main {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: var(--space-2xl);
}

.post-header-main .post-title {
	margin: 0;
	color: var(--color-text-heading);
	font-weight: var(--font-bold);
	font-size: var(--text-3xl);
	line-height: var(--leading-tight);
	font-family: var(--font-serif);
}

.post-meta {
	display: flex;
	flex-grow: 1;
	justify-content: right;
	padding-right: var(--space-lg);
	color: var(--color-text-subtle);
	font-size: var(--text-code);
}

.post-header-date {
	color: var(--color-text-subtle);
	font-size: var(--font-base);
	white-space: nowrap;
}

.meta-separator {
	color: var(--color-border);
}

/* Header details */
.post-header-collapsible {
	margin-top: 0.75rem;
}

.post-summary {
	margin-bottom: 0.75rem;
	color: var(--color-text-muted);
	font-style: italic;
	font-size: 0.95rem;
	line-height: var(--leading-normal);
}

.post-author-line,
.post-editors-line {
	margin: 0 0 0.5rem 0;
	color: var(--color-text-muted);
	line-height: var(--leading-normal);
}

.post-author-line strong,
.post-editors-line strong {
	color: var(--color-text-subtle);
	font-family: var(--font-mono);
}

.post-tags {
	display: flex;
	flex-wrap: wrap;
	gap: var(--space-sm);
	margin: 0;
	padding: 0;
	list-style: none;
}

.tag {
	border-radius: var(--radius-full);
	background-color: var(--color-tag-bg);
	padding: 0.15rem var(--space-sm);
	color: var(--color-tag-text);
	font-size: var(--text-xs);
	font-family: var(--font-mono);
	white-space: nowrap;
}

.blog-container {
	display: flex;
	align-items: flex-start;
	gap: var(--space-2xl);
	contain: layout;
	margin: 0 auto;
	padding: var(--space-xl);
	max-width: var(--max-width-wide);
	min-height: 100vh;
}

.toc-sidebar {
	position: sticky;
	top: 100px;
	flex: 0 0 var(--toc-width);
	align-self: flex-start;
	order: -1;
	contain: layout style;
	width: var(--toc-width);
	min-width: var(--toc-width);
	max-height: calc(100vh - 120px);
	overflow-y: auto;
}

.toc-wrapper {
	box-shadow:
		0 4px 12px oklch(0% 0 0 / 0.12),
		0 2px 4px oklch(0% 0 0 / 0.08);
	border: 1px solid var(--color-border-dark);
	border-radius: var(--radius-lg);
	background: var(--uchu-gray-1);
	padding: var(--space-md);
}

.toc-title {
	margin-bottom: 0.75rem;
	border-bottom: 1px solid var(--color-border);
	padding-bottom: var(--space-sm);
	color: var(--color-tag-text);
	font-weight: var(--font-semibold);
	font-size: var(--text-lg);
	font-family: var(--font-serif);
}

.article-toc ul {
	margin: 0;
	padding: 0;
	font-weight: var(--font-semibold);
	list-style: none;
}

.article-toc li {
	margin: var(--space-xs) 0;
}

.article-toc > ul > li > ul {
	margin-left: var(--space-md);
}

.article-toc > ul > li > ul > li > ul {
	margin-left: var(--space-md);
}

.article-toc a {
	display: block;
	transition: all var(--transition-fast);
	border-left: 2px solid transparent;
	border-radius: var(--radius-sm);
	padding: 0.35rem var(--space-sm);
	color: var(--color-text);
	font-weight: var(--font-semibold);
	font-family: var(--font-serif);
	text-decoration: none;
}

.article-toc a:hover {
	background-color: var(--color-bg-alt);
	color: var(--color-text);
}

.article-toc a.active {
	border-left: 2px solid var(--color-accent);
	background-color: var(--color-accent-bg);
	color: var(--color-accent);
	font-weight: var(--font-bold);
}

.post-content {
	flex: 1;
	contain: layout style;
	padding: 0 var(--space-xl) var(--space-xl) var(--space-xl);
	width: calc(100% - var(--toc-width) - var(--space-2xl));
	min-width: 0;
	max-width: var(--max-width-content);
	font-family: var(--font-mono);
}

.post-content h1,
.post-content h2,
.post-content h3,
.post-content h4 {
	position: relative;
	margin-top: var(--space-xl);
	margin-bottom: var(--space-md);
	scroll-margin-top: 120px;
	color: var(--color-text-heading);
	font-weight: var(--font-bold);
	font-family: var(--font-serif);
}

.post-content strong {
	font-family: var(--font-mono);
}

.post-content .heading-anchor {
	display: flex;
	position: absolute;
	top: 50%;
	left: -1.75em;
	align-items: center;
	transform: translateY(-50%);
	opacity: 0;
	transition: opacity var(--transition-fast);
	text-decoration: none;
}

.post-content .heading-anchor .anchor-icon {
	display: flex;
	align-items: center;
	color: var(--color-text-muted);
}

.post-content .heading-anchor svg {
	width: 0.8em;
	height: 0.8em;
}

.post-content h1:hover .heading-anchor,
.post-content h2:hover .heading-anchor,
.post-content h3:hover .heading-anchor,
.post-content h4:hover .heading-anchor,
.post-content .heading-anchor:focus {
	opacity: 1;
}

.post-content .heading-anchor:hover .anchor-icon {
	color: var(--color-accent);
}

.post-content .heading-anchor.copied::after {
	position: absolute;
	top: 50%;
	left: 100%;
	transform: translateY(-50%);
	animation: fadeInOut 1.5s ease forwards;
	margin-left: 0.5em;
	border-radius: var(--radius-sm);
	background: var(--color-text-heading);
	padding: 0.25em 0.5em;
	content: "Copied!";
	color: var(--color-bg);
	font-size: var(--text-xs);
	white-space: nowrap;
}

@keyframes fadeInOut {
	0% {
		opacity: 0;
	}
	15% {
		opacity: 1;
	}
	85% {
		opacity: 1;
	}
	100% {
		opacity: 0;
	}
}

.post-content h1 {
	font-size: var(--text-3xl);
}

.post-content h2 {
	border-bottom: 1px solid var(--color-border);
	padding-bottom: var(--space-xs);
	font-size: var(--text-2xl);
}

.post-content h3 {
	font-size: var(--text-xl);
}

.post-content h4 {
	font-size: var(--text-lg);
}

.post-content p {
	margin: var(--space-md) 0;
	color: var(--color-text);
}

.post-content a {
	color: var(--color-accent);
	text-decoration: none;
}

.post-content a:hover {
	text-decoration: none;
}

.post-content a.numeric-reference {
	position: relative;
	top: -0.25em;
	vertical-align: super;
	font-weight: var(--font-semibold);
	font-size: 0.75em;
	line-height: 0;
	text-decoration: none;
}

.post-content a.numeric-reference:hover {
	text-decoration: underline;
}

.post-content code {
	border-radius: var(--radius-sm);
	background: var(--color-code-bg);
	padding: 0.2em 0.4em;
	font-size: var(--text-code);
	font-family: var(--font-mono);
}

.post-content pre {
	margin: var(--space-lg) 0;
	border-radius: var(--radius-md);
	background: var(--color-code-bg);
	padding: var(--space-md);
	overflow-x: auto;
	font-size: var(--text-code);
	font-family: var(--font-mono);
}

.post-content pre code {
	background: none;
	padding: 0;
}

.post-content ul,
.post-content ol {
	margin: var(--space-md) 0;
	padding-left: var(--space-lg);
}

.post-content li {
	margin-bottom: var(--space-sm);
}

.post-content blockquote {
	margin: var(--space-lg) 0;
	border-left: 3px solid var(--color-accent);
	border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
	background: var(--color-bg-alt);
	padding: var(--space-sm) var(--space-md);
	color: var(--color-text-muted);
	font-style: italic;
	font-family: var(--font-mono);
}

.post-content img {
	margin: var(--space-md) 0;
	border-radius: var(--radius-md);
	max-width: 100%;
	height: auto;
}

.post-content table {
	margin: var(--space-lg) 0;
	border-collapse: collapse;
	width: 100%;
}

.post-content th,
.post-content td {
	border: 1px solid var(--color-border);
	padding: 0.75rem;
	text-align: left;
}

.post-content th {
	background: var(--color-code-bg);
	font-weight: var(--font-bold);
}

/* Responsive Design */
@media (max-width: 1024px) {
	.blog-container {
		flex-direction: column;
		padding: var(--space-lg);
		min-height: auto;
	}

	.toc-sidebar {
		position: relative;
		top: 0;
		flex: none;
		contain: layout style;
		margin-bottom: var(--space-lg);
		width: 100%;
		min-width: 100%;
		max-height: none;
	}

	.toc-wrapper {
		max-height: 300px;
		overflow-y: auto;
	}

	.post-content {
		width: 100%;
		max-width: 100%;
	}
}

@media (max-width: 640px) {
	.post-header-fixed {
		padding: var(--space-md);
	}

	.post-header-main {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--space-xs);
	}

	.post-meta {
		flex-direction: column;
		align-items: flex-start;
		gap: var(--space-xs);
	}

	.meta-separator {
		display: none;
	}

	.post-title {
		font-size: 1.35rem;
	}

	.post-summary {
		font-size: var(--text-sm);
	}

	.blog-container {
		padding: var(--space-md);
	}

	.toc-sidebar {
		display: none;
	}

	.post-content {
		padding: 1.25rem;
	}

	.post-content h1 {
		font-size: var(--text-2xl);
	}

	.post-content h2 {
		font-size: var(--text-xl);
	}

	.post-content h3 {
		font-size: var(--text-lg);
	}

	.post-content .heading-anchor {
		position: absolute;
		right: 0;
		left: auto;
		opacity: 0.5;
	}

	.post-content .heading-anchor.copied::after {
		right: 100%;
		left: auto;
		margin-right: 0.5em;
		margin-left: 0;
	}
}
